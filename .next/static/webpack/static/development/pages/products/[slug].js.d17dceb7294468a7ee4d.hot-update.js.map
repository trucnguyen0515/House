{"version":3,"file":"static/webpack/static/development/pages/products/[slug].js.d17dceb7294468a7ee4d.hot-update.js","sources":["webpack:///./src/pages/products/[slug].js"],"sourcesContent":["import { withRouter } from \"next/router\";\nimport { Component, Fragment } from \"react\";\nimport Layout1 from \"../../layouts/layout1\";\nimport MyRouter from \"../../const/routes\";\nimport { Breadcrumb, Row, Col } from \"antd\";\nimport Link from \"next/link\";\nimport {MyService,FuncService} from \"../../services/myService\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\n\n// data\nimport { dataProductPosition, dataCategories } from \"../../data/data\";\n\n// import \"jquery\";\nimport \"antd/dist/antd.css\";\nimport \"../../scss/pages/[slug].scss\";\nimport CategoryComp  from \"../../components/categoryComp\";\nimport ProductComp  from \"../../components/productComp\";\nimport { NewHOC } from \"../../hoc/newComponent\";\nimport { SoLuongHienThiToiDa, TenHienThiToiDa } from \"../../const/const\";\nimport LoadingPage from \"../../components/SharedComp/LoadingPage\";\n\nexport async function getStaticPaths() {\n  const paths = dataCategories.map(data => `/products/${data.slug}`);\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({ params }) {\n  let product,productsChild,productsChild_2;\n  let arrChild_1 = [];\n\n  let data = await getData();\n\n  const arrStr = params.slug.split(\"~\");\n  let typeComp = arrStr.length === 1 ? 0 : 1 // 0 CategoryComp, 1 ProductComp\n\n  if(typeComp === 0){\n    product = FuncService.search(data,\"slug\",arrStr[0]); // Danh muc hien tai (F1)\n    productsChild = FuncService.find(data,product.children,'id'); // Danh sach con cua danh muc hien tai (F2)\n    productsChild.map((res,i) => res.children.length > 0 ? arrChild_1 = [...arrChild_1,...res.children]: null) // lay tat ca con cua danh sach con cua danh muc hien tai (F3)\n    productsChild_2 = FuncService.find(data,arrChild_1,'id'); // lay tat ca con cua danh sach con cua danh muc hien tai (F3)\n  }\n  if(typeComp === 1){\n\n  }\n  console.log(\"ssr\")\n  return { props: {typeComp, product, productsChild, productsChild_2,loading:false}};\n}\n\n\nconst getData = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(dataCategories);\n    }, 500);\n  });\n};\n\nclass ProductsPosition extends Component {\n\n  // componentWillReceiveProps(nextProps) {\n  //   console.log(nextProps)\n  //   if(nextProps.loading !== this.state.loading) {\n  //     this.setState({loading: this.props.loading});\n  //   }\n  // }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    console.log(nextProps.loading,prevState.loading)\n    if(nextProps.loading!==prevState.loading){\n      return { loading: prevState.loading};\n    }\n    return null\n  }\n\n  state = {\n    loading:this.props.loading\n  }\n\n  listBreadcrum = [\n    {\n      name: \"All Products\",\n      href: MyRouter.Products.href,\n      as: \"\"\n    },\n    {\n      name: MyService.parseSeoToName(\n        this.props.router.query[Object.keys(this.props.router.query)[0]]\n      ),\n      href: this.props.router.pathname,\n      as: this.props.router.asPath\n    }\n  ];\n\n  renderBreadcrumb = () => {\n    let slug = this.props.router.query[MyRouter.slug.replace(\"[\",\"\").replace(\"]\",\"\")];\n    let objCur = FuncService.search(dataCategories,'slug',slug);\n\n    return this.listBreadcrum.map((item, i) => {\n      return (\n        <Breadcrumb.Item key={i}>\n          <Link href={item.href} as={item.as}>\n            <span className=\"mylink fs-15\">{item.name}</span>\n          </Link>\n        </Breadcrumb.Item>\n      );\n    });\n  };\n\n  render() {\n    const {typeComp,product,productsChild,productsChild_2} = this.props;\n    const renderComp = typeComp === 0\n    ? <CategoryComp product={product} productsChild={productsChild} productsChild_2={productsChild_2} callback={(res) => {\n        this.setState({loading:true})\n    }}/>\n    : <ProductComp product={product} productsChild={productsChild} callback={(res) => {\n\n    }}/>\n\n    // console.log(\"product: \",product);\n    // console.log(\"productsChild: \",productsChild)\n    // console.log(\"productsChild_2: \",productsChild_2)\n\n    console.log(\"state: \",this.state.loading);\n    console.log(\"props: \",this.props.loading)\n\n    return (\n      <Layout1>\n        <LoadingPage isLoading={this.state.loading}>\n        <div className=\"container\" id=\"productPosition\">\n          <Breadcrumb>{this.renderBreadcrumb()}</Breadcrumb>\n          <h1>\n            {MyService.parseSeoToName(this.props.router.query[Object.keys(this.props.router.query)[0]])}\n          </h1>\n          {renderComp}\n        </div>\n        </LoadingPage>\n      </Layout1>\n    );\n  }\n}\n\n\n\nexport default withRouter(ProductsPosition);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAuCA;;;;;;;;;;;;;;;;AAiBA;AACA;AADA;AACA;AAGA;AAEA;AACA;AACA;AAHA;AAMA;AAGA;AACA;AALA;AACA;AAQA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;AA/EA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;;;;AAfA;AACA;;AAqFA;;;;A","sourceRoot":""}